api_platform:
    # 1. M√âTADONN√âES DE L'API
    title: Hello API Platform
    version: 1.0.0

    # 2. CONFIGURATION SWAGGER / OPENAPI
    swagger:
        api_keys:
            jwt:
                name: Authorization
                type: header

    # 3. CONFIGURATION PAR D√âFAUT (Appliqu√©e √† toutes les entit√©s)
    defaults:
        stateless: true

        # üöÄ CACHE HTTP : R√©duit drastiquement la charge serveur
        cache_headers:
            max_age: 60             # Le navigateur garde les donn√©es 1 min
            shared_max_age: 3600    # Les serveurs interm√©diaires gardent 1h
            vary: ["Content-Type", "Authorization", "Origin"]

        # üèéÔ∏è EAGER LOADING : √âvite le probl√®me des requ√™tes SQL N+1
        # Fusionne les requ√™tes pour les relations (images, cat√©gories, etc.)
        eager_loading:
            enabled: true
            fetch_eager: true       # Force la jointure SQL (JOIN)
            max_joins: 30           # Limite pour √©viter des requ√™tes trop lourdes

    # 4. GESTION DE L'INVALIDATION DU CACHE
    http_cache:
        invalidation:
            enabled: true

    # 5. FORMATS DE DONN√âES SUPPORT√âS
    formats:
        jsonld: ["application/ld+json"]
        json: ["application/json"]
        html: ["text/html"]

    # 6. INTERFACES DE DOCUMENTATION
    enable_swagger: true
    enable_swagger_ui: true
    enable_re_doc: false

    openapi:
        swagger_ui_extra_configuration:
            persistAuthorization: true # Garde le token JWT apr√®s un refresh de Swagger